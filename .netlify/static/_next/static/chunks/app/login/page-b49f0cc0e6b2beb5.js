(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{66612:function(e,t,s){Promise.resolve().then(s.bind(s,87355))},87355:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Login}});var a=s(57437),r=s(2265),l=s(24033),n=s(61396),i=s.n(n),c=s(90998),o=s(1295),u=s(5589),d=s(3089),h=s(86582),m=s(6429),g=s(10609),x=s(6454),f=s(3887),p=s(71424);function Login(){let e=(0,l.useRouter)(),{login:t}=(0,f.useAuth)(),[s,n]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[N,b]=(0,r.useState)(!1),handleSubmit=async a=>{a.preventDefault(),b(!0);try{let a=await x.hi.login(s,v);if(a.data){let s=a.data.data;localStorage.setItem("healthsaas_user",JSON.stringify(s)),localStorage.setItem("healthsaas_token","authenticated"),t(s),p.toast.success("Welcome back!"),e.push("/dashboard")}}catch(t){let e=(0,x.e$)(t);p.toast.error(e)}finally{b(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-accent/20 to-background p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center gap-3 mb-2",children:(0,a.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl bg-gradient-primary shadow-elevated",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-primary-foreground"})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-primary bg-clip-text text-transparent",children:"HealthSaaS"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"Community Health Worker Platform"})]}),(0,a.jsxs)(g.Zb,{className:"shadow-elevated",children:[(0,a.jsxs)(g.Ol,{children:[(0,a.jsx)(g.ll,{children:"Sign in to your account"}),(0,a.jsx)(g.SZ,{children:"Enter your credentials to access your dashboard"})]}),(0,a.jsxs)(g.aY,{children:[(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"email",children:"Email"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(h.I,{id:"email",type:"email",placeholder:"chw@healthsaas.org",value:s,onChange:e=>n(e.target.value),className:"pl-9",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m._,{htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(h.I,{id:"password",type:"password",placeholder:"••••••••",value:v,onChange:e=>j(e.target.value),className:"pl-9",required:!0})]})]}),(0,a.jsx)(d.z,{type:"submit",className:"w-full bg-gradient-primary hover:opacity-90",disabled:N,children:N?"Signing in...":"Sign in"})]}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm",children:(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Don't have an account?"," ",(0,a.jsx)(i(),{href:"/register",className:"font-medium text-primary hover:underline",children:"Register here"})]})})]})]})]})})}},3887:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=s(57437),r=s(2265),l=s(24033);let n={getUser:()=>{try{let e=localStorage.getItem("healthsaas_user");return e?JSON.parse(e):null}catch(e){return null}},setUser:e=>{localStorage.setItem("healthsaas_user",JSON.stringify(e)),localStorage.setItem("healthsaas_token","authenticated")},clear:()=>{localStorage.removeItem("healthsaas_user"),localStorage.removeItem("healthsaas_token")}},i=(0,r.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[o,u]=(0,r.useState)(!0),d=(0,l.useRouter)(),h=(0,l.usePathname)();return(0,r.useEffect)(()=>{let e=n.getUser();c(e),u(!1)},[]),(0,r.useEffect)(()=>{if(!o){let e=["/login","/register"].includes(h);s&&e?d.push("/dashboard"):s||e||d.push("/login")}},[s,o,h,d]),(0,a.jsx)(i.Provider,{value:{user:s,login:e=>{c(e),n.setUser(e)},logout:()=>{c(null),n.clear(),d.push("/login")},updateUser:e=>{if(s){let t={...s,...e};c(t),n.setUser(t)}},loading:o},children:t})}let useAuth=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},function(e){e.O(0,[919,937,430,971,472,744],function(){return e(e.s=66612)}),_N_E=e.O()}]);