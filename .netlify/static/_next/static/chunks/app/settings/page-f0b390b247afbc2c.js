(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{62305:function(e,s,a){Promise.resolve().then(a.bind(a,53813))},53813:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Settings}});var t=a(57437),r=a(2265),i=a(4434),n=a(10609),l=a(3089),c=a(86582),d=a(6429),o=a(92376),m=a(60345);let u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(o.fC,{className:(0,m.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:s,children:(0,t.jsx)(o.bU,{className:(0,m.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});u.displayName=o.fC.displayName;var h=a(40150),x=a(41735),f=a(17094);let p=f.fC,j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(f.aV,{ref:s,className:(0,m.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});j.displayName=f.aV.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(f.xz,{ref:s,className:(0,m.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});g.displayName=f.xz.displayName;let v=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(f.VY,{ref:s,className:(0,m.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});v.displayName=f.VY.displayName;var y=a(31472),N=a(26823);let w=r.forwardRef((e,s)=>{let{className:a,orientation:r="horizontal",decorative:i=!0,...n}=e;return(0,t.jsx)(N.f,{ref:s,decorative:i,orientation:r,className:(0,m.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...n})});w.displayName=N.f.displayName;var b=a(49036),k=a(67972),C=a(3021),S=a(20597),P=a(97332),_=a(92295),A=a(50774),F=a(6141),R=a(35817),D=a(31541),Z=a(45367),z=a(6454),E=a(15316),V=a(3887),T=a(71424);let getUserProperty=function(e){for(var s=arguments.length,a=Array(s>1?s-1:0),t=1;t<s;t++)a[t-1]=arguments[t];for(let s of a)if(e&&e[s])return e[s];return""};function Settings(){let[e,s]=(0,r.useState)("profile"),[a,o]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),{user:N,updateUser:Q}=(0,V.useAuth)(),{handleApiCall:I}=(0,E.h)(),[L,U]=(0,r.useState)({full_name:"",email:"",phone:"",role:"",language:"en",timezone:"Africa/Nairobi"}),[O,B]=(0,r.useState)({emailNotifications:!0,pushNotifications:!1,smsAlerts:!0,newPatientAlerts:!0,highRiskAlerts:!0,visitReminders:!0,weeklyReports:!1}),[M,Y]=(0,r.useState)({theme:"light",autoSave:!0,dataExport:!0,offlineMode:!1,syncFrequency:"realtime",recordsPerPage:25}),[q,$]=(0,r.useState)({twoFactorAuth:!1,sessionTimeout:30,passwordLastChanged:"",lastLogin:"",loginAttempts:0}),[H,G]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{N&&U({full_name:getUserProperty(N,"full_name","username","name"),email:N.email||"",phone:getUserProperty(N,"phone","phone_number"),role:N.role||"",language:"en",timezone:"Africa/Nairobi"}),loadSecuritySettings()},[N]);let loadSecuritySettings=async()=>{try{let e={twoFactorAuth:!1,sessionTimeout:30,passwordLastChanged:"2024-01-15",lastLogin:new Date().toISOString(),loginAttempts:0};$(e)}catch(e){console.error("Failed to load security settings:",e)}},handleSaveProfile=async()=>{o(!0);try{let e=N._id;if(!e){T.toast.error("Unable to identify user. Please try logging out and back in.");return}await I(()=>z.hi.updateUser(e,{full_name:L.full_name,email:L.email,phone:L.phone}),{successMessage:"Profile updated successfully",onSuccess:e=>{e.data.data&&Q(e.data.data)}})}catch(s){let e=(0,z.e$)(s);T.toast.error("Failed to update profile: ".concat(e))}finally{o(!1)}},handleSaveNotifications=async()=>{o(!0);try{localStorage.setItem("notificationSettings",JSON.stringify(O)),await new Promise(e=>setTimeout(e,500)),T.toast.success("Notification settings updated")}catch(e){T.toast.error("Failed to save notification settings")}finally{o(!1)}},handleSaveAppSettings=async()=>{o(!0);try{localStorage.setItem("appSettings",JSON.stringify(M)),await new Promise(e=>setTimeout(e,500)),"dark"===M.theme?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),T.toast.success("Application settings updated")}catch(e){T.toast.error("Failed to save application settings")}finally{o(!1)}},handleExportData=async()=>{try{T.toast.info("Exporting data...");let e=await z.hi.downloadCSVTemplate(),s=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","healthtrack_export_".concat(new Date().toISOString().split("T")[0],".csv")),document.body.appendChild(a),a.click(),a.remove(),T.toast.success("Data exported successfully")}catch(s){let e=(0,z.e$)(s);T.toast.error("Failed to export data: ".concat(e))}},handleChangePassword=async()=>{if(H.newPassword!==H.confirmPassword){T.toast.error("New passwords do not match");return}if(H.newPassword.length<6){T.toast.error("Password must be at least 6 characters long");return}o(!0);try{let e=N._id;if(!e){T.toast.error("Unable to identify user. Please try logging out and back in.");return}await I(()=>z.hi.updateUser(e,{password:H.newPassword}),{successMessage:"Password changed successfully",onSuccess:()=>{f(!1),G({currentPassword:"",newPassword:"",confirmPassword:""})}})}catch(s){let e=(0,z.e$)(s);T.toast.error("Failed to change password: ".concat(e))}finally{o(!1)}},handleDeleteData=async()=>{if(confirm("Are you absolutely sure? This will permanently delete all data and cannot be undone.")&&confirm('This is a destructive operation. Please type "DELETE" to confirm.'))try{T.toast.info("Deleting data..."),await new Promise(e=>setTimeout(e,2e3)),T.toast.success("Data deleted successfully")}catch(e){T.toast.error("Failed to delete data")}};return(0,t.jsxs)(i.A,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Settings"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and application preferences"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(h.C,{variant:"secondary",className:"flex items-center gap-1",children:[(0,t.jsx)(b.Z,{className:"h-3 w-3"}),L.role]})})]}),(0,t.jsxs)(p,{value:e,onValueChange:s,className:"space-y-6",children:[(0,t.jsxs)(j,{className:"grid w-full grid-cols-5",children:[(0,t.jsxs)(g,{value:"profile",className:"flex items-center gap-2",children:[(0,t.jsx)(k.Z,{className:"h-4 w-4"}),"Profile"]}),(0,t.jsxs)(g,{value:"notifications",className:"flex items-center gap-2",children:[(0,t.jsx)(C.Z,{className:"h-4 w-4"}),"Notifications"]}),(0,t.jsxs)(g,{value:"appearance",className:"flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"}),"Appearance"]}),(0,t.jsxs)(g,{value:"security",className:"flex items-center gap-2",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4"}),"Security"]}),(0,t.jsxs)(g,{value:"data",className:"flex items-center gap-2",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4"}),"Data"]})]}),(0,t.jsx)(v,{value:"profile",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Personal Information"}),(0,t.jsx)(n.SZ,{children:"Update your personal details and contact information"})]}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"full_name",children:"Full Name"}),(0,t.jsx)(c.I,{id:"full_name",value:L.full_name,onChange:e=>U({...L,full_name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"email",children:"Email Address"}),(0,t.jsx)(c.I,{id:"email",type:"email",value:L.email,onChange:e=>U({...L,email:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)(c.I,{id:"phone",value:L.phone,onChange:e=>U({...L,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"role",children:"Role"}),(0,t.jsx)(c.I,{id:"role",value:L.role,disabled:!0,className:"bg-muted"})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"language",children:"Language"}),(0,t.jsxs)(x.Ph,{value:L.language,onValueChange:e=>U({...L,language:e}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"en",children:"English"}),(0,t.jsx)(x.Ql,{value:"sw",children:"Swahili"}),(0,t.jsx)(x.Ql,{value:"fr",children:"French"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"timezone",children:"Timezone"}),(0,t.jsxs)(x.Ph,{value:L.timezone,onValueChange:e=>U({...L,timezone:e}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"Africa/Nairobi",children:"East Africa Time (Nairobi)"}),(0,t.jsx)(x.Ql,{value:"UTC",children:"UTC"}),(0,t.jsx)(x.Ql,{value:"America/New_York",children:"Eastern Time (New York)"})]})]})]})]}),(0,t.jsxs)(l.z,{onClick:handleSaveProfile,disabled:a,className:"mt-4",children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Changes"]})]})]})}),(0,t.jsx)(v,{value:"notifications",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Notification Preferences"}),(0,t.jsx)(n.SZ,{children:"Choose how you want to be notified about system activities"})]}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Notification Channels"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"email-notifications",children:"Email Notifications"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),(0,t.jsx)(u,{id:"email-notifications",checked:O.emailNotifications,onCheckedChange:e=>B({...O,emailNotifications:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"push-notifications",children:"Push Notifications"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Receive browser push notifications"})]}),(0,t.jsx)(u,{id:"push-notifications",checked:O.pushNotifications,onCheckedChange:e=>B({...O,pushNotifications:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"sms-alerts",children:"SMS Alerts"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Receive critical alerts via SMS"})]}),(0,t.jsx)(u,{id:"sms-alerts",checked:O.smsAlerts,onCheckedChange:e=>B({...O,smsAlerts:e})})]})]})]}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Alert Types"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"new-patient-alerts",children:"New Patient Registrations"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Get notified when new patients are registered"})]}),(0,t.jsx)(u,{id:"new-patient-alerts",checked:O.newPatientAlerts,onCheckedChange:e=>B({...O,newPatientAlerts:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"high-risk-alerts",children:"High Risk Patient Alerts"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Immediate alerts for high-risk patients"})]}),(0,t.jsx)(u,{id:"high-risk-alerts",checked:O.highRiskAlerts,onCheckedChange:e=>B({...O,highRiskAlerts:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"visit-reminders",children:"Visit Reminders"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Reminders for scheduled patient visits"})]}),(0,t.jsx)(u,{id:"visit-reminders",checked:O.visitReminders,onCheckedChange:e=>B({...O,visitReminders:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"weekly-reports",children:"Weekly Reports"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Receive weekly summary reports"})]}),(0,t.jsx)(u,{id:"weekly-reports",checked:O.weeklyReports,onCheckedChange:e=>B({...O,weeklyReports:e})})]})]})]}),(0,t.jsxs)(l.z,{onClick:handleSaveNotifications,disabled:a,children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Notification Settings"]})]})]})}),(0,t.jsx)(v,{value:"appearance",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Appearance & Behavior"}),(0,t.jsx)(n.SZ,{children:"Customize how the application looks and behaves"})]}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"theme",children:"Theme"}),(0,t.jsxs)(x.Ph,{value:M.theme,onValueChange:e=>Y({...M,theme:e}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"light",children:"Light"}),(0,t.jsx)(x.Ql,{value:"dark",children:"Dark"}),(0,t.jsx)(x.Ql,{value:"system",children:"System"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"records-per-page",children:"Records Per Page"}),(0,t.jsxs)(x.Ph,{value:M.recordsPerPage.toString(),onValueChange:e=>Y({...M,recordsPerPage:parseInt(e)}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"10",children:"10 records"}),(0,t.jsx)(x.Ql,{value:"25",children:"25 records"}),(0,t.jsx)(x.Ql,{value:"50",children:"50 records"}),(0,t.jsx)(x.Ql,{value:"100",children:"100 records"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"auto-save",children:"Auto Save"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Automatically save form data as you type"})]}),(0,t.jsx)(u,{id:"auto-save",checked:M.autoSave,onCheckedChange:e=>Y({...M,autoSave:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"offline-mode",children:"Offline Mode"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Enable offline data collection and sync later"})]}),(0,t.jsx)(u,{id:"offline-mode",checked:M.offlineMode,onCheckedChange:e=>Y({...M,offlineMode:e})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"sync-frequency",children:"Data Sync Frequency"}),(0,t.jsxs)(x.Ph,{value:M.syncFrequency,onValueChange:e=>Y({...M,syncFrequency:e}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"realtime",children:"Real-time"}),(0,t.jsx)(x.Ql,{value:"5min",children:"Every 5 minutes"}),(0,t.jsx)(x.Ql,{value:"15min",children:"Every 15 minutes"}),(0,t.jsx)(x.Ql,{value:"manual",children:"Manual"})]})]})]}),(0,t.jsxs)(l.z,{onClick:handleSaveAppSettings,disabled:a,children:[(0,t.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),a?"Saving...":"Save Appearance Settings"]})]})]})}),(0,t.jsx)(v,{value:"security",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Security Settings"}),(0,t.jsx)(n.SZ,{children:"Manage your account security and access controls"})]}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Password & Authentication"}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{children:"Password"}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Last changed: ",q.passwordLastChanged||"Never"]})]}),(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>f(!0),children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Change Password"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{htmlFor:"two-factor",children:"Two-Factor Authentication"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security to your account"})]}),(0,t.jsx)(u,{id:"two-factor",checked:q.twoFactorAuth,onCheckedChange:e=>$({...q,twoFactorAuth:e})})]})]}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Session Management"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"session-timeout",children:"Session Timeout"}),(0,t.jsxs)(x.Ph,{value:q.sessionTimeout.toString(),onValueChange:e=>$({...q,sessionTimeout:parseInt(e)}),children:[(0,t.jsx)(x.i4,{children:(0,t.jsx)(x.ki,{})}),(0,t.jsxs)(x.Bw,{children:[(0,t.jsx)(x.Ql,{value:"15",children:"15 minutes"}),(0,t.jsx)(x.Ql,{value:"30",children:"30 minutes"}),(0,t.jsx)(x.Ql,{value:"60",children:"1 hour"}),(0,t.jsx)(x.Ql,{value:"240",children:"4 hours"})]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Automatically log out after period of inactivity"})]})]}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Recent Activity"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d._,{className:"text-sm",children:"Last Login"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(F.Z,{className:"h-4 w-4 text-muted-foreground"}),q.lastLogin?new Date(q.lastLogin).toLocaleString():"Never"]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(d._,{className:"text-sm",children:"Failed Login Attempts"}),(0,t.jsxs)("div",{className:"text-sm",children:[q.loginAttempts," in the last 24 hours"]})]})]})]})]})]})}),(0,t.jsx)(v,{value:"data",className:"space-y-6",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Data Management"}),(0,t.jsx)(n.SZ,{children:"Export, import, and manage your application data"})]}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Data Export"}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{children:"Export All Data"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Download complete dataset as CSV files"})]}),(0,t.jsxs)(l.z,{variant:"outline",onClick:handleExportData,children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Export Data"]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(h.C,{variant:"secondary",children:"Patients"}),(0,t.jsx)(h.C,{variant:"secondary",children:"Households"}),(0,t.jsx)(h.C,{variant:"secondary",children:"Visits"}),(0,t.jsx)(h.C,{variant:"secondary",children:"Users"})]})]})]}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Data Import"}),(0,t.jsx)("div",{className:"p-4 border rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{children:"Import Data"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Upload CSV files to import data in bulk"})]}),(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{T.toast.info("Please select file to import...")},children:[(0,t.jsx)(D.Z,{className:"h-4 w-4 mr-2"}),"Import Data"]})]})})]}),(0,t.jsx)(w,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"font-medium text-red-600",children:"Danger Zone"}),(0,t.jsx)("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d._,{className:"text-red-600",children:"Delete All Data"}),(0,t.jsx)("div",{className:"text-sm text-red-600",children:"Permanently delete all data from the system. This action cannot be undone."})]}),(0,t.jsxs)(l.z,{variant:"destructive",onClick:handleDeleteData,children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 mr-2"}),"Delete All Data"]})]})})]})]})]})})]})]}),(0,t.jsx)(y.Vq,{open:m,onOpenChange:f,children:(0,t.jsxs)(y.cZ,{children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsx)(y.$N,{children:"Change Password"}),(0,t.jsx)(y.Be,{children:"Enter your current password and set a new one."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"current-password",children:"Current Password"}),(0,t.jsx)(c.I,{id:"current-password",type:"password",value:H.currentPassword,onChange:e=>G({...H,currentPassword:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"new-password",children:"New Password"}),(0,t.jsx)(c.I,{id:"new-password",type:"password",value:H.newPassword,onChange:e=>G({...H,newPassword:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d._,{htmlFor:"confirm-password",children:"Confirm New Password"}),(0,t.jsx)(c.I,{id:"confirm-password",type:"password",value:H.confirmPassword,onChange:e=>G({...H,confirmPassword:e.target.value})})]})]}),(0,t.jsxs)(y.cN,{children:[(0,t.jsx)(l.z,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(l.z,{onClick:handleChangePassword,disabled:a,children:a?"Changing...":"Change Password"})]})]})})]})}},40150:function(e,s,a){"use strict";a.d(s,{C:function(){return Badge}});var t=a(57437);a(2265);var r=a(96061),i=a(60345);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:(0,i.cn)(n({variant:a}),s),...r})}},31472:function(e,s,a){"use strict";a.d(s,{$N:function(){return h},Be:function(){return x},Vq:function(){return c},cN:function(){return DialogFooter},cZ:function(){return u},fK:function(){return DialogHeader},hg:function(){return d}});var t=a(57437),r=a(2265),i=a(28712),n=a(82549),l=a(60345);let c=i.fC,d=i.xz,o=i.h_;i.x8;let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.aV,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});m.displayName=i.aV.displayName;let u=r.forwardRef((e,s)=>{let{className:a,children:r,...c}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(i.VY,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,(0,t.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=i.VY.displayName;let DialogHeader=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};DialogFooter.displayName="DialogFooter";let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.Dx,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});h.displayName=i.Dx.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.dk,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});x.displayName=i.dk.displayName},86582:function(e,s,a){"use strict";a.d(s,{I:function(){return n}});var t=a(57437),r=a(2265),i=a(60345);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...n})});n.displayName="Input"},6429:function(e,s,a){"use strict";a.d(s,{_:function(){return d}});var t=a(57437),r=a(2265),i=a(36743),n=a(96061),l=a(60345);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.f,{ref:s,className:(0,l.cn)(c(),a),...r})});d.displayName=i.f.displayName},41735:function(e,s,a){"use strict";a.d(s,{Bw:function(){return f},Ph:function(){return o},Ql:function(){return j},i4:function(){return u},ki:function(){return m}});var t=a(57437),r=a(2265),i=a(41798),n=a(83523),l=a(9224),c=a(62442),d=a(60345);let o=i.fC;i.ZA;let m=i.B4,u=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(i.xz,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,t.jsx)(i.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.xz.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})})});h.displayName=i.u_.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=i.$G.displayName;let f=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,t.jsx)(i.h_,{children:(0,t.jsxs)(i.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,t.jsx)(h,{}),(0,t.jsx)(i.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(x,{})]})})});f.displayName=i.VY.displayName;let p=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})});p.displayName=i.__.displayName;let j=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(i.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(i.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(i.eT,{children:r})]})});j.displayName=i.ck.displayName;let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});g.displayName=i.Z0.displayName}},function(e){e.O(0,[919,937,769,554,68,922,971,472,744],function(){return e(e.s=62305)}),_N_E=e.O()}]);