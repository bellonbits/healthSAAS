(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{60767:function(e,t,s){Promise.resolve().then(s.bind(s,8610))},8610:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Analytics}});var r=s(57437),a=s(2265),n=s(4434),i=s(10609),l=s(40150),d=s(3089),c=s(39333),o=s(35223),x=s(67460),h=s(36612),m=s(96531),u=s(70229),j=s(38227),f=s(16573),g=s(24235),p=s(50039),b=s(14584),y=s(44909),v=s(77691),N=s(28203),_=s(35817),w=s(25750),k=s(77480),Z=s(67607),M=s(72894),A=s(6454),R=s(15316),D=s(71424);let O=["#10b981","#f59e0b","#ef4444"];function Analytics(){let[e,t]=(0,a.useState)(null),[s,C]=(0,a.useState)(!0),{handleApiCall:P}=(0,R.h)();(0,a.useEffect)(()=>{loadAnalyticsData()},[]);let loadAnalyticsData=async()=>{C(!0);try{let e=await P(()=>A.hi.getDashboardStats().then(e=>e.data.data),{showError:!0});e&&t(e)}catch(e){console.error("Failed to load analytics data:",e),D.toast.error("Failed to load analytics data")}finally{C(!1)}};if(s)return(0,r.jsx)(n.A,{children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading analytics data..."})]})})})});if(!e)return(0,r.jsx)(n.A,{children:(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(N.Z,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Data Available"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-6",children:"Analytics data will appear here once you start using the system."}),(0,r.jsx)(d.z,{onClick:loadAnalyticsData,children:"Retry"})]})})});let K=(()=>{if(!e)return[];if(e.risk_distribution)return Object.entries(e.risk_distribution).map(e=>{let[t,s]=e;return{name:t,value:s}});let t=e.total_patients||1,s=e.high_risk_patients||0,r=Math.floor((t-s)*.3);return[{name:"Low",value:Math.max(0,t-s-r)},{name:"Medium",value:Math.max(0,r)},{name:"High",value:s}]})(),S=(()=>{if(!e)return[];let t=["Jan","Feb","Mar","Apr","May","Jun"],s=e.total_patients||0,r=e.total_visits||0,a=e.total_households||0;return t.map((e,n)=>{let i=t.length-1-n,l=1-.1*i;return{month:e,patients:Math.round(s*l),visits:Math.round(r*l),households:Math.round(a*l)}}).reverse()})(),Y=(()=>{if(!e)return[];let t=e.total_visits||0;return[{type:"Routine",count:Math.round(.5*t)},{type:"Follow-up",count:Math.round(.3*t)},{type:"Emergency",count:Math.round(.1*t)},{type:"Initial",count:Math.round(.1*t)}]})();return(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Analytics"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Real-time insights and performance metrics"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.z,{onClick:loadAnalyticsData,variant:"outline",children:"Refresh Data"}),(0,r.jsxs)(d.z,{onClick:()=>{D.toast.info("Preparing data export...")},variant:"outline",children:[(0,r.jsx)(_.Z,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Patients"}),(0,r.jsx)(w.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.total_patients||0}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.patients_trend>0?"+":"",e.patients_trend||0,"% from last month"]})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Total Households"}),(0,r.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.total_households||0}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.households_trend>0?"+":"",e.households_trend||0,"% from last month"]})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"Medical Visits"}),(0,r.jsx)(Z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:e.total_visits||0}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.visits_trend>0?"+":"",e.visits_trend||0,"% from last month"]})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.ll,{className:"text-sm font-medium",children:"High Risk Patients"}),(0,r.jsx)(M.Z,{className:"h-4 w-4 text-red-500"})]}),(0,r.jsxs)(i.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.high_risk_patients||0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Requiring immediate attention"})]})]})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Patient Risk Distribution"}),(0,r.jsx)(i.SZ,{children:"Breakdown of patients by risk level"})]}),(0,r.jsx)(i.aY,{children:K.length>0?(0,r.jsx)(c.h,{width:"100%",height:300,children:(0,r.jsxs)(o.u,{children:[(0,r.jsx)(x.b,{data:K,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:!0,children:K.map((e,t)=>(0,r.jsx)(h.b,{fill:O[t%O.length]},"cell-".concat(t)))}),(0,r.jsx)(m.u,{formatter:e=>[e,"Number of Patients"]}),(0,r.jsx)(u.D,{})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No risk distribution data available"})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Monthly Trends"}),(0,r.jsx)(i.SZ,{children:"Patient registrations and visits over time"})]}),(0,r.jsx)(i.aY,{children:S.length>0?(0,r.jsx)(c.h,{width:"100%",height:300,children:(0,r.jsxs)(j.w,{data:S,children:[(0,r.jsx)(f.q,{strokeDasharray:"3 3"}),(0,r.jsx)(g.K,{dataKey:"month"}),(0,r.jsx)(p.B,{}),(0,r.jsx)(m.u,{}),(0,r.jsx)(u.D,{}),(0,r.jsx)(b.x,{type:"monotone",dataKey:"patients",stroke:"#3b82f6",name:"Patients"}),(0,r.jsx)(b.x,{type:"monotone",dataKey:"visits",stroke:"#10b981",name:"Visits"}),(0,r.jsx)(b.x,{type:"monotone",dataKey:"households",stroke:"#f59e0b",name:"Households"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No trend data available"})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Visit Types"}),(0,r.jsx)(i.SZ,{children:"Distribution of different visit types"})]}),(0,r.jsx)(i.aY,{children:Y.length>0?(0,r.jsx)(c.h,{width:"100%",height:300,children:(0,r.jsxs)(y.v,{data:Y,children:[(0,r.jsx)(f.q,{strokeDasharray:"3 3"}),(0,r.jsx)(g.K,{dataKey:"type"}),(0,r.jsx)(p.B,{}),(0,r.jsx)(m.u,{}),(0,r.jsx)(v.$,{dataKey:"count",fill:"#8b5cf6",name:"Number of Visits"})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No visit type data available"})})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Recent Activity Summary"}),(0,r.jsx)(i.SZ,{children:"Last 30 days performance overview"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Recent Visits"}),(0,r.jsx)(l.C,{variant:"default",children:e.recent_visits_count||0})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"High Risk Cases"}),(0,r.jsx)(l.C,{variant:"destructive",children:e.high_risk_patients||0})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Active Households"}),(0,r.jsx)(l.C,{variant:"secondary",children:e.total_households||0})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Total Patients"}),(0,r.jsx)(l.C,{variant:"success",children:e.total_patients||0})]})]})})]})]}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsxs)(i.Ol,{children:[(0,r.jsx)(i.ll,{children:"Performance Indicators"}),(0,r.jsx)(i.SZ,{children:"Key metrics and system performance"})]}),(0,r.jsx)(i.aY,{children:(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat((e.patients_trend||0)>0?"text-green-600":"text-red-600"),children:[e.patients_trend>0?"+":"",e.patients_trend||0,"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Patient Growth"})]}),(0,r.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat((e.visits_trend||0)>0?"text-green-600":"text-red-600"),children:[e.visits_trend>0?"+":"",e.visits_trend||0,"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Visit Increase"})]}),(0,r.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round((e.high_risk_patients||0)/(e.total_patients||1)*100),"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"High Risk Rate"})]}),(0,r.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold ".concat((e.households_trend||0)>0?"text-green-600":"text-red-600"),children:[e.households_trend>0?"+":"",e.households_trend||0,"%"]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Household Growth"})]})]})})]})]})})}},40150:function(e,t,s){"use strict";s.d(t,{C:function(){return Badge}});var r=s(57437);s(2265);var a=s(96061),n=s(60345);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:s}),t),...a})}}},function(e){e.O(0,[919,937,743,922,971,472,744],function(){return e(e.s=60767)}),_N_E=e.O()}]);