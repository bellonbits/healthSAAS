"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[922],{4434:function(e,t,a){a.d(t,{A:function(){return Layout}});var s=a(57437),r=a(3887),i=a(61396),n=a.n(i),l=a(24033),o=a(25119),c=a(25750),d=a(77480),u=a(67607),h=a(67972),m=a(92457),p=a(60272),g=a(29409),x=a(68004),f=a(17158),v=a(81291),y=a(65883),b=a(3089),j=a(2265),w=a(60345);let N=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"Patients",href:"/patients",icon:c.Z},{name:"Households",href:"/households",icon:d.Z},{name:"Visits",href:"/visits",icon:u.Z},{name:"Users",href:"/users",icon:h.Z},{name:"Analytics",href:"/analytics",icon:m.Z},{name:"AI Assistant",href:"/ai-assistant",icon:p.Z},{name:"Settings",href:"/settings",icon:g.Z}];function Sidebar(){var e,t;let a=(0,l.usePathname)(),{user:i,logout:o}=(0,r.useAuth)(),[c,d]=(0,j.useState)(!1),[u,h]=(0,j.useState)(!1),closeMobileSidebar=()=>{h(!1)};return i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,s.jsx)(b.z,{variant:"outline",size:"icon",onClick:()=>{h(!u)},className:"h-10 w-10 bg-white shadow-md",children:(0,s.jsx)(x.Z,{className:"h-5 w-5"})})}),u&&(0,s.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:closeMobileSidebar}),(0,s.jsx)("div",{className:(0,w.cn)("bg-white border-r border-gray-200 transition-all duration-300 ease-in-out z-40","fixed inset-y-0 left-0 transform","lg:relative lg:translate-x-0",c?"w-16":"w-64",u?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex items-center h-16 flex-shrink-0 px-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:(0,w.cn)("flex items-center transition-opacity duration-200",c?"w-full justify-center opacity-100":"w-full opacity-100"),children:[!c&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"h-8 w-8 bg-gradient-primary rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"⚕️"})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"HealthSaaS"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Community Health"})]})]}),c&&(0,s.jsx)("div",{className:"h-8 w-8 bg-gradient-primary rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-sm",children:"⚕️"})}),(0,s.jsx)(b.z,{variant:"ghost",size:"icon",onClick:()=>{d(!c)},className:(0,w.cn)("ml-auto hidden lg:flex","h-8 w-8",c?"mx-auto":"ml-3"),children:c?(0,s.jsx)(f.Z,{className:"h-4 w-4"}):(0,s.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:N.map(e=>{let t=a===e.href;return(0,s.jsxs)(n(),{href:e.href,onClick:closeMobileSidebar,className:(0,w.cn)("group flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200","hover:bg-gray-50 hover:text-gray-900",t?"bg-health-teal-50 text-health-teal-700 border border-health-teal-200":"text-gray-600",c?"justify-center px-2":""),children:[(0,s.jsx)(e.icon,{className:(0,w.cn)("flex-shrink-0",c?"h-5 w-5":"h-5 w-5 mr-3")}),!c&&(0,s.jsx)("span",{className:"truncate",children:e.name}),c&&(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:e.name})]},e.name)})}),(0,s.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:(0,s.jsxs)("div",{className:(0,w.cn)("flex items-center transition-all duration-200",c?"justify-center":""),children:[!c&&(0,s.jsxs)("div",{className:"flex items-center min-w-0",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-health-teal-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:null==i?void 0:null===(e=i.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"ml-3 min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 truncate",children:null==i?void 0:i.name}),(0,s.jsx)("p",{className:"text-xs font-medium text-gray-500 capitalize truncate",children:null==i?void 0:i.role})]})]}),c&&(0,s.jsx)("div",{className:"w-8 h-8 bg-health-teal-600 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:null==i?void 0:null===(t=i.name)||void 0===t?void 0:t.charAt(0).toUpperCase()})}),(0,s.jsx)(b.z,{variant:"ghost",size:"icon",onClick:o,className:(0,w.cn)("text-gray-400 hover:text-gray-500 flex-shrink-0",c?"ml-0":"ml-3"),title:"Sign out",children:(0,s.jsx)(y.Z,{className:"h-5 w-5"})})]})})]})})]}):null}function Navbar(){var e;let{user:t}=(0,r.useAuth)();return(0,s.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-4 px-4 lg:px-6",children:[(0,s.jsxs)("div",{className:"lg:ml-0",children:[(0,s.jsx)("h1",{className:"text-xl lg:text-2xl font-bold text-gray-900",children:getPageTitle()}),(0,s.jsx)("p",{className:"text-gray-600 text-sm lg:text-base",children:"Community Health Worker Dashboard"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==t?void 0:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null==t?void 0:t.role})]}),(0,s.jsx)("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-health-teal-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-white font-semibold text-sm",children:null==t?void 0:null===(e=t.name)||void 0===e?void 0:e.charAt(0).toUpperCase()})})]})]})})}function getPageTitle(){let e=window.location.pathname;return({"/dashboard":"Dashboard","/patients":"Patients","/households":"Households","/visits":"Health Visits","/users":"User Management","/analytics":"Analytics","/ai-assistant":"AI Health Assistant","/settings":"Settings"})[e]||"HealthSaaS"}function Layout(e){let{children:t}=e,{user:a}=(0,r.useAuth)();return a?(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsx)(Sidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,s.jsx)(Navbar,{}),(0,s.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-50/50",children:(0,s.jsx)("div",{className:(0,w.cn)("container mx-auto p-4 lg:p-6","pt-16 lg:pt-6"),children:t})})]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:t})}},3887:function(e,t,a){a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=a(57437),r=a(2265),i=a(24033);let n={getUser:()=>{try{let e=localStorage.getItem("healthsaas_user");return e?JSON.parse(e):null}catch(e){return null}},setUser:e=>{localStorage.setItem("healthsaas_user",JSON.stringify(e)),localStorage.setItem("healthsaas_token","authenticated")},clear:()=>{localStorage.removeItem("healthsaas_user"),localStorage.removeItem("healthsaas_token")}},l=(0,r.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[a,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),u=(0,i.useRouter)(),h=(0,i.usePathname)();return(0,r.useEffect)(()=>{let e=n.getUser();o(e),d(!1)},[]),(0,r.useEffect)(()=>{if(!c){let e=["/login","/register"].includes(h);a&&e?u.push("/dashboard"):a||e||u.push("/login")}},[a,c,h,u]),(0,s.jsx)(l.Provider,{value:{user:a,login:e=>{o(e),n.setUser(e)},logout:()=>{o(null),n.clear(),u.push("/login")},updateUser:e=>{if(a){let t={...a,...e};o(t),n.setUser(t)}},loading:c},children:t})}let useAuth=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3089:function(e,t,a){a.d(t,{z:function(){return o}});var s=a(57437),r=a(2265),i=a(96061),n=a(60345);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,...o}=e;return(0,s.jsx)("button",{className:(0,n.cn)(l({variant:r,size:i,className:a})),ref:t,...o})});o.displayName="Button"},10609:function(e,t,a){a.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return n},aY:function(){return d},ll:function(){return o}});var s=a(57437),r=a(2265),i=a(60345);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent"},6454:function(e,t,a){a.d(t,{Tm:function(){return generateMockActivities},e$:function(){return getErrorMessage},hi:function(){return i}});var s=a(54829);let r=s.Z.create({baseURL:"http://4.222.216.225:8000",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("healthsaas_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("healthsaas_user"),localStorage.removeItem("healthsaas_token"),window.location.href="/login"),Promise.reject(e)});let getErrorMessage=e=>{var t,a;if(null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.detail){let t=e.response.data.detail;if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e=>"".concat(e.loc.join("."),": ").concat(e.msg)).join(", ")}return e.message||"An unexpected error occurred"},i={health:()=>r.get("/api/health"),login:(e,t)=>r.post("/api/users/login",null,{params:{email:e,password:t}}),register:e=>r.post("/api/users/register",e),getUsers:()=>r.get("/api/users"),updateUser:(e,t)=>r.put("/api/users/".concat(e),t),deleteUser:e=>r.delete("/api/users/".concat(e)),getDashboardStats:()=>r.get("/api/analytics/dashboard"),getRecentActivity:()=>r.get("/api/analytics/recent-activity"),getHouseholds:e=>r.get("/api/households",{params:e}),createHousehold:e=>r.post("/api/households",e),getHousehold:e=>r.get("/api/households/".concat(e)),updateHousehold:(e,t)=>r.put("/api/households/".concat(e),t),deleteHousehold:e=>r.delete("/api/households/".concat(e)),searchHouseholds:e=>r.get("/api/households/search",{params:{q:e}}),getHouseholdStatistics:()=>r.get("/api/households/statistics"),getPatients:e=>r.get("/api/patients",{params:e}),createPatient:e=>r.post("/api/patients",e),getPatient:e=>r.get("/api/patients/".concat(e)),updatePatient:(e,t)=>r.put("/api/patients/".concat(e),t),deletePatient:e=>r.delete("/api/patients/".concat(e)),importPatientsCSV:e=>r.post("/api/patients/import-csv",e,{headers:{"Content-Type":"multipart/form-data"}}),downloadCSVTemplate:()=>r.get("/api/patients/csv-template",{responseType:"blob"}),getVisits:e=>r.get("/api/visits",{params:e}),createVisit:e=>r.post("/api/visits",e),updateVisit:(e,t)=>r.put("/api/visits/".concat(e),t),getVisit:e=>r.get("/api/visits/".concat(e)),deleteVisit:e=>r.delete("/api/visits/".concat(e)),getAIHealthRecommendation:e=>r.post("/api/ai/health-recommendation",e),getAIStatus:()=>r.get("/api/ai/status")},generateMockActivities=()=>{let e=[{_id:"1",type:"patient_created",description:"New patient registered",user:"Dr. Sarah Johnson",user_id:"user1",timestamp:new Date(Date.now()-3e5).toISOString(),metadata:{patient_name:"John Kamau",patient_id:"patient123"}},{_id:"2",type:"visit_created",description:"Medical visit recorded",user:"Nurse Mary Wanjiku",user_id:"user2",timestamp:new Date(Date.now()-18e5).toISOString(),metadata:{patient_name:"Jane Wambui",visit_type:"Routine Checkup"}},{_id:"3",type:"household_created",description:"New household registered",user:"CHW Peter Omondi",user_id:"user3",timestamp:new Date(Date.now()-72e5).toISOString(),metadata:{household_code:"HH-015",household_id:"household123"}},{_id:"4",type:"patient_updated",description:"Patient information updated",user:"Dr. Sarah Johnson",user_id:"user1",timestamp:new Date(Date.now()-144e5).toISOString(),metadata:{patient_name:"Michael Otieno",patient_id:"patient456"}},{_id:"5",type:"visit_created",description:"Emergency visit recorded",user:"Dr. Sarah Johnson",user_id:"user1",timestamp:new Date(Date.now()-216e5).toISOString(),metadata:{patient_name:"Grace Achieng",visit_type:"Emergency"}},{_id:"6",type:"user_logged_in",description:"User logged into system",user:"Admin User",user_id:"admin1",timestamp:new Date(Date.now()-288e5).toISOString()},{_id:"7",type:"data_exported",description:"Data export completed",user:"Dr. Sarah Johnson",user_id:"user1",timestamp:new Date(Date.now()-432e5).toISOString()}];return e}},15316:function(e,t,a){a.d(t,{h:function(){return useApi}});var s=a(2265),r=a(71424),i=a(6454);let useApi=()=>{let e=(0,s.useCallback)(async(e,t)=>{let{successMessage:a,onSuccess:s,onError:n,showError:l=!0}=t||{};try{let t=await e();return a&&r.toast.success(a),s&&s(t),t}catch(t){let e=(0,i.e$)(t);return l&&r.toast.error(e),n&&n(e),null}},[]);return{handleApiCall:e}}},60345:function(e,t,a){a.d(t,{cn:function(){return cn}});var s=a(57042),r=a(74769);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}}]);